<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DJ管理</title>
    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">

    <script type="text/javascript" src="../js/jquery/jquery.md5.js"></script>
    <script type="text/javascript" src="../js/jquery/jquery.cookie.js"></script>
    <script type="text/javascript" src="../js/7x-networks/restful.js"></script>
    <script type="text/javascript" src="../js/layer/layer.js"></script>
    <script type="text/javascript" src="../js/7x-networks/main.js"></script>
    <link href="../css/common.css" rel="stylesheet">
</head>
<style type="text/css">
    .logout {
        margin-top: 30px;
        margin-bottom: 50px;
        height: 30px;
        text-align: right;
    }

    .input-group {
        margin-top: 60px;
        margin-bottom: 60px;
    }

    button {
        margin: 20px 0;
    }
</style>
<body>
<div class="container">
    <div class="logout">
        <label onclick="logout()">
            <span class="glyphicon glyphicon-star" aria-hidden="true"></span> 退出
        </label>
    </div>
    <form class="form-signin">
        <h2 class="form-signin-heading">DJ管理界面</h2>
        <div class="input-group">
            <span class="input-group-addon">输入姓名</span>
            <input type="text" class="form-control" id="userName" aria-describedby="basic-addon3">
        </div>
        <button class="btn btn-lg btn-primary btn-block" type="button" onclick="splash_screen(this)">闪屏</button>
        <button class="btn btn-lg btn-primary btn-block" type="button" onclick="switch_mode(this)">切换模式</button>
    </form>
</div>
</body>
<script type="text/javascript">
    var splash_screen_option = true;
    var switch_mode_option = true;

    window.alert = function (message) {
        layer.msg(message);
    };

    function splash_screen(obj) {
        var userName = $("#userName").val();
        var url = "http://47.99.57.113:10011/DJ/splash_screen?userName=" + userName;
        //var url = "http://localhost:10011/DJ/splash_screen?userName=" + userName;
        if (splash_screen_option) {
            // ajax(url, "GET", null, false, function (res) {
            //     console.log(res);
            //     splash_screen_option = false;
            //     $(obj).attr("disabled", "disabled");
            //     alert("发送成功！");
            //     setTimeout(function () {
            //         splash_screen_option = true;
            //         $(obj).removeAttr("disabled");
            //     }, 10000);
            // });
            get(url, function (res) {
                console.log(res);
                splash_screen_option = false;
                $(obj).attr("disabled", "disabled");
                alert("发送成功！");
                setTimeout(function () {
                    splash_screen_option = true;
                    $(obj).removeAttr("disabled");
                }, 10000);
            })
        }
    }

    function switch_mode(obj) {
        var url = "http://47.99.57.113:10011/DJ/switch_mode";
        //var url = "http://localhost:10011/DJ/switch_mode";
        if (switch_mode_option) {
            // ajax(url, "GET", null, false, function (res) {
            //     console.log(res);
            //     switch_mode_option = false;
            //     $(obj).attr("disabled", "disabled");
            //     alert("发送成功！");
            //     setTimeout(function () {
            //         switch_mode_option = true;
            //         $(obj).removeAttr("disabled");
            //     }, 10000);
            // });
            get(url, function (res) {
                console.log(res);
                switch_mode_option = false;
                $(obj).attr("disabled", "disabled");
                alert("发送成功！");
                setTimeout(function () {
                    switch_mode_option = true;
                    $(obj).removeAttr("disabled");
                }, 10000);
            })
        }
    }

</script>
</html>